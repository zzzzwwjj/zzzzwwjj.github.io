<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <script type="application/javascript" src='https://zzzzwwjj.github.io/js/theme-mode.js'></script>
    <link rel="stylesheet" href='https://zzzzwwjj.github.io/css/frameworks.min.css' />
    <link rel="stylesheet" href='https://zzzzwwjj.github.io/css/github.min.css' />
    <link rel="stylesheet" href='https://zzzzwwjj.github.io/css/github-style.css' />
    <link rel="stylesheet" href='https://zzzzwwjj.github.io/css/light.css' />
    <link rel="stylesheet" href='https://zzzzwwjj.github.io/css/dark.css' />
    <link rel="stylesheet" href='https://zzzzwwjj.github.io/css/syntax.css' />
    <title>649. Dota2 参议院 - zzzzwwjj的小站</title>
    
    <link rel="icon" type="image/x-icon" href='/images/github.png'>
    
    <meta name="theme-color" content="#1e2327">

    
    <meta name="description"
  content="写出来十分钟，优化一整天。这不比博人传燃？" />
<meta name="keywords"
  content='blog, zzzzwwjj' />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://zzzzwwjj.github.io/post/2021-01/649.-dota2-%E5%8F%82%E8%AE%AE%E9%99%A2/" />


<meta name="twitter:card" content="summary" />
<meta name="twitter:title" content="649. Dota2 参议院 - zzzzwwjj的小站" />
<meta name="twitter:description"
  content="写出来十分钟，优化一整天。这不比博人传燃？" />
<meta name="twitter:site" content="https://zzzzwwjj.github.io/" />
<meta name="twitter:creator" content="" />
<meta name="twitter:image"
  content="https://zzzzwwjj.github.io/">


<meta property="og:type" content="article" />
<meta property="og:title" content="649. Dota2 参议院 - zzzzwwjj的小站">
<meta property="og:description"
  content="写出来十分钟，优化一整天。这不比博人传燃？" />
<meta property="og:url" content="https://zzzzwwjj.github.io/post/2021-01/649.-dota2-%E5%8F%82%E8%AE%AE%E9%99%A2/" />
<meta property="og:site_name" content="649. Dota2 参议院" />
<meta property="og:image"
  content="https://zzzzwwjj.github.io/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">

<meta property="article:published_time" content="2021-01-27 15:43:46 &#43;0800 CST" />










</head>

<body>
  <div style="position: relative">
  <header class="Header js-details-container Details px-3 px-md-4 px-lg-5 flex-wrap flex-md-nowrap open Details--on">
    <div class="Header-item mobile-none" style="margin-top: -4px; margin-bottom: -4px;">
      <a class="Header-link" href="https://zzzzwwjj.github.io/">
        <svg class="octicon" height="32" viewBox="0 0 16 16" version="1.1" width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item d-md-none">
      <button class="Header-link btn-link js-details-target" type="button"
        onclick="document.querySelector('#header-search').style.display = document.querySelector('#header-search').style.display == 'none'? 'block': 'none'">
        <svg height="24" class="octicon octicon-three-bars" viewBox="0 0 16 16" version="1.1" width="24">
          <path fill-rule="evenodd"
            d="M1 2.75A.75.75 0 011.75 2h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 2.75zm0 5A.75.75 0 011.75 7h12.5a.75.75 0 110 1.5H1.75A.75.75 0 011 7.75zM1.75 12a.75.75 0 100 1.5h12.5a.75.75 0 100-1.5H1.75z">
          </path>
        </svg>
      </button>
    </div>
    <div style="display: none;" id="header-search"
      class="Header-item Header-item--full flex-column flex-md-row width-full flex-order-2 flex-md-order-none mr-0 mr-md-3 mt-3 mt-md-0 Details-content--hidden-not-important d-md-flex">
      <div
        class="Header-search header-search flex-auto js-site-search position-relative flex-self-stretch flex-md-self-auto mb-3 mb-md-0 mr-0 mr-md-3 scoped-search site-scoped-search js-jump-to">
        <div class="position-relative">
          <form target="_blank" action="https://www.google.com/search" accept-charset="UTF-8" method="get"
            autocomplete="off">
            <label
              class="Header-search-label form-control input-sm header-search-wrapper p-0 js-chromeless-input-container header-search-wrapper-jump-to position-relative d-flex flex-justify-between flex-items-center">
              <input type="text"
                class="Header-search-input form-control input-sm header-search-input jump-to-field js-jump-to-field js-site-search-focus js-site-search-field is-clearable"
                name="q" value="" placeholder="Search" autocomplete="off">
              <input type="hidden" name="q" value="site:https://zzzzwwjj.github.io/">
            </label>
          </form>
        </div>
      </div>
    </div>

    <div class="Header-item Header-item--full flex-justify-center d-md-none position-relative">
      <a class="Header-link " href="https://zzzzwwjj.github.io/">
        <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
          width="32">
          <path fill-rule="evenodd"
            d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
          </path>
        </svg>
      </a>
    </div>
    <div class="Header-item" style="margin-right: 0;">
      <a href="javascript:void(0)" class="Header-link no-select" onclick="switchTheme()">
        <svg style="fill: var(--color-profile-color-modes-toggle-moon);" class="no-select" viewBox="0 0 16 16"
          version="1.1" width="16" height="16">
          <path fill-rule="evenodd" clip-rule="evenodd"
            d="M4.52208 7.71754C7.5782 7.71754 10.0557 5.24006 10.0557 2.18394C10.0557 1.93498 10.0392 1.68986 10.0074 1.44961C9.95801 1.07727 10.3495 0.771159 10.6474 0.99992C12.1153 2.12716 13.0615 3.89999 13.0615 5.89383C13.0615 9.29958 10.3006 12.0605 6.89485 12.0605C3.95334 12.0605 1.49286 10.001 0.876728 7.24527C0.794841 6.87902 1.23668 6.65289 1.55321 6.85451C2.41106 7.40095 3.4296 7.71754 4.52208 7.71754Z">
          </path>
        </svg>
      </a>
    </div>
  </header>
</div>
  
<div>
  <main>
    <div class="gisthead pagehead bg-gray-light pb-0 pt-3 mb-4">
      <div class="px-0">
        <div class="mb-3 d-flex px-3 px-md-3 px-lg-5">
          <div class="flex-auto min-width-0 width-fit mr-3">
            <div class="d-flex">
              <div class="d-none d-md-block">
                <a class="avatar mr-2 flex-shrink-0" href="https://zzzzwwjj.github.io/">
                  <img class=" avatar-user"
                    src="https://zzzzwwjj.github.io/images/avatar.png"
                    width="32" height="32"></a>
              </div>
              <div class="d-flex flex-column">
                <h1 class="break-word f3 text-normal mb-md-0 mb-1">
                  <span class="author">
                    <a href="https://zzzzwwjj.github.io/">zzzzwwjj</a></span><span
                    class="path-divider">/</span><strong class="css-truncate-target mr-1" style="max-width: 410px"><a
                      href="https://zzzzwwjj.github.io/post/2021-01/649.-dota2-%E5%8F%82%E8%AE%AE%E9%99%A2/">649. Dota2 参议院</a></strong>
                </h1>
                <div class="note m-0">
                  Created <relative-time datetime="Wed, 27 Jan 2021 15:43:46 &#43;0800"
                    class="no-wrap">
                    Wed, 27 Jan 2021 15:43:46 &#43;0800</relative-time>

                  
                  <span class="file-info-divider"></span>
                  Modified <relative-time datetime="Wed, 27 Jan 2021 16:17:53 &#43;0800"
                    class="no-wrap">
                    Wed, 27 Jan 2021 16:17:53 &#43;0800</relative-time>
                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container-lg px-3 new-discussion-timeline">
      <div class="repository-content gist-content">
        <div>
          <div class="js-gist-file-update-container js-task-list-container file-box">
            <div id="file-pytest" class="file my-2">
              <div class="file-header d-flex flex-md-items-center flex-items-start">
                <div class="file-info d-flex flex-md-items-center flex-items-start flex-order-1 flex-auto">
                  <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                    1115 Words
                    

                  </div>
                  <div class="file-actions flex-order-2 pt-0">
                    
                    
                    <a class="muted-link mr-3" href="/tags/%E4%B8%AD%E7%AD%89">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      中等
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/%E5%BE%AA%E7%8E%AF%E9%98%9F%E5%88%97">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      循环队列
                    </a>
                    
                    <a class="muted-link mr-3" href="/tags/java">
                      <svg class="octicon octicon-tag" viewBox="0 0 16 16" version="1.1" width="16" height="16">
                        <path fill-rule="evenodd"
                          d="M2.5 7.775V2.75a.25.25 0 01.25-.25h5.025a.25.25 0 01.177.073l6.25 6.25a.25.25 0 010 .354l-5.025 5.025a.25.25 0 01-.354 0l-6.25-6.25a.25.25 0 01-.073-.177zm-1.5 0V2.75C1 1.784 1.784 1 2.75 1h5.025c.464 0 .91.184 1.238.513l6.25 6.25a1.75 1.75 0 010 2.474l-5.026 5.026a1.75 1.75 0 01-2.474 0l-6.25-6.25A1.75 1.75 0 011 7.775zM6 5a1 1 0 100 2 1 1 0 000-2z">
                        </path>
                      </svg>
                      Java
                    </a>
                    
                    
                  </div>
                </div>
              </div>


              <div class="Box-body px-5 pb-5">
                <article class="markdown-body entry-content container-lg"><h1 id="原题链接httpsleetcode-cncomproblemsdota2-senate"><a href="https://leetcode-cn.com/problems/dota2-senate/">原题链接</a></h1>
<p>第一遍直接暴力遍历，设置一个状态数组记录该参议员是否已被禁言，遍历到被禁言的参议员直接跳过：</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">predictPartyVictory</span><span class="o">(</span><span class="n">String</span> <span class="n">senate</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">senate</span><span class="o">.</span><span class="na">length</span><span class="o">(</span><span class="o">)</span><span class="o">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">d</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="kt">int</span><span class="o">[</span><span class="o">]</span><span class="o">[</span><span class="o">]</span> <span class="n">pos</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">l</span><span class="o">]</span><span class="o">[</span><span class="n">2</span><span class="o">]</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">l</span><span class="o">;</span><span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">senate</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">)</span><span class="o">=</span><span class="o">=</span><span class="sc">&#39;R&#39;</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">pos</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="o">[</span><span class="n">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">2</span><span class="o">;</span>
                <span class="n">r</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
            <span class="o">}</span>
            <span class="k">else</span> <span class="o">{</span>
                <span class="n">pos</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="o">[</span><span class="n">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span>
                <span class="n">d</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">i</span><span class="o">,</span> <span class="n">temp</span><span class="o">;</span>
        <span class="k">while</span><span class="o">(</span><span class="n">r</span><span class="o">!</span><span class="o">=</span><span class="n">0</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">d</span><span class="o">!</span><span class="o">=</span><span class="n">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">while</span><span class="o">(</span><span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="o">=</span><span class="o">=</span><span class="n">1</span><span class="o">)</span> <span class="n">index</span> <span class="o">=</span> <span class="o">(</span><span class="n">index</span> <span class="o">+</span> <span class="n">1</span><span class="o">)</span> <span class="o">%</span> <span class="n">l</span><span class="o">;</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">index</span><span class="o">;</span>
            <span class="n">i</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="o">;</span>
            <span class="k">while</span><span class="o">(</span><span class="n">pos</span><span class="o">[</span><span class="n">temp</span><span class="o">]</span><span class="o">[</span><span class="n">0</span><span class="o">]</span><span class="o">=</span><span class="o">=</span><span class="n">i</span> <span class="o">|</span><span class="o">|</span> <span class="n">pos</span><span class="o">[</span><span class="n">temp</span><span class="o">]</span><span class="o">[</span><span class="n">1</span><span class="o">]</span><span class="o">=</span><span class="o">=</span><span class="n">1</span><span class="o">)</span> <span class="n">temp</span> <span class="o">=</span> <span class="o">(</span><span class="n">temp</span> <span class="o">+</span> <span class="n">1</span><span class="o">)</span> <span class="o">%</span> <span class="n">l</span><span class="o">;</span>
            <span class="n">pos</span><span class="o">[</span><span class="n">temp</span><span class="o">]</span><span class="o">[</span><span class="n">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">1</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">i</span><span class="o">=</span><span class="o">=</span><span class="n">1</span><span class="o">)</span> <span class="n">r</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
            <span class="k">else</span> <span class="n">d</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
            <span class="n">index</span> <span class="o">=</span> <span class="o">(</span><span class="n">index</span> <span class="o">+</span> <span class="n">1</span><span class="o">)</span> <span class="o">%</span> <span class="n">l</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">d</span><span class="o">=</span><span class="o">=</span><span class="n">0</span><span class="o">)</span> <span class="k">return</span> <span class="s">&#34;Radiant&#34;</span><span class="o">;</span>
        <span class="k">return</span> <span class="s">&#34;Dire&#34;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>执行用时765ms，惨不忍睹，遂开始尝试优化。</p>
<p>冥思苦想后想到用指针数组代替状态数组，每个指针指向下一个未被禁言的参议员，以此缩短遍历时间：</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">predictPartyVictory</span><span class="o">(</span><span class="n">String</span> <span class="n">senate</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">senate</span><span class="o">.</span><span class="na">length</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="kt">int</span><span class="o">[</span><span class="o">]</span> <span class="n">pos</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">l</span><span class="o">]</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">l</span><span class="o">-</span><span class="n">1</span><span class="o">;</span><span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="o">)</span> <span class="n">pos</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">;</span>
        <span class="n">pos</span><span class="o">[</span><span class="n">l</span><span class="o">-</span><span class="n">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="kt">boolean</span><span class="o">[</span><span class="o">]</span> <span class="n">isDire</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">boolean</span><span class="o">[</span><span class="n">l</span><span class="o">]</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">d</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">r</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">l</span><span class="o">;</span><span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">senate</span><span class="o">.</span><span class="na">charAt</span><span class="o">(</span><span class="n">i</span><span class="o">)</span><span class="o">=</span><span class="o">=</span><span class="sc">&#39;R&#39;</span><span class="o">)</span> <span class="o">{</span>
                <span class="n">r</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
                <span class="n">isDire</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="n">d</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
                <span class="n">isDire</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="k">while</span><span class="o">(</span><span class="n">r</span><span class="o">!</span><span class="o">=</span><span class="n">0</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">d</span><span class="o">!</span><span class="o">=</span><span class="n">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">temp</span> <span class="o">=</span> <span class="n">index</span><span class="o">;</span>
            <span class="k">while</span><span class="o">(</span><span class="n">isDire</span><span class="o">[</span><span class="n">pos</span><span class="o">[</span><span class="n">temp</span><span class="o">]</span><span class="o">]</span><span class="o">=</span><span class="o">=</span><span class="n">isDire</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">)</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">temp</span><span class="o">]</span><span class="o">;</span>
            <span class="n">pos</span><span class="o">[</span><span class="n">temp</span><span class="o">]</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">pos</span><span class="o">[</span><span class="n">temp</span><span class="o">]</span><span class="o">]</span><span class="o">;</span>
            <span class="k">if</span><span class="o">(</span><span class="n">isDire</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">)</span> <span class="n">r</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
            <span class="k">else</span> <span class="n">d</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">r</span><span class="o">=</span><span class="o">=</span><span class="n">0</span><span class="o">)</span> <span class="k">return</span> <span class="s">&#34;Dire&#34;</span><span class="o">;</span>
        <span class="k">return</span> <span class="s">&#34;Radiant&#34;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>执行用时40ms，效果显著，不过仍存在可以优化的地方：寻找将被当前参议员禁言的参议员时仍存在重复遍历的情况，不过奈何我太菜了，想不到如果优化了。</p>
<p>看了下<a href="https://leetcode-cn.com/problems/dota2-senate/solution/dota2-can-yi-yuan-by-leetcode-solution-jb7l/">官方题解</a>，用双队列实现的循环遍历，通过+n后再次加入队列表示下次遍历的位置，思路很巧妙，不过由于java是用LinkedList实现的Queue，效率实在不太行，所以运行时间并不是最优。</p>
<p>在题解里还看到一种解法：<a href="https://leetcode-cn.com/problems/dota2-senate/solution/java-649dota2can-yi-yuan-chao-9961-by-mu-0dqh/">Java 649.Dota2参议院 超99.61%</a></p>
<p>通过记录接下来要被禁言的对方阵营参议员数量，解决了我没能解决的优化的点，不过他的代码没有对已被禁言的参议员的遍历进行优化，所以虽然执行用时3ms，不过理论时间复杂度却是O(nlogn)。</p>
<p>我参考了他的思路，对我的代码再次进行了优化：</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">predictPartyVictory</span><span class="o">(</span><span class="n">String</span> <span class="n">senate</span><span class="o">)</span> <span class="o">{</span>
        <span class="kt">char</span><span class="o">[</span><span class="o">]</span> <span class="n">sen</span> <span class="o">=</span> <span class="n">senate</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">(</span><span class="o">)</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">l</span> <span class="o">=</span> <span class="n">sen</span><span class="o">.</span><span class="na">length</span><span class="o">;</span>
        <span class="kt">int</span><span class="o">[</span><span class="o">]</span> <span class="n">pos</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="n">l</span><span class="o">]</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">l</span><span class="o">-</span><span class="n">1</span><span class="o">;</span><span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="o">)</span> <span class="n">pos</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">1</span><span class="o">;</span>
        <span class="n">pos</span><span class="o">[</span><span class="n">l</span><span class="o">-</span><span class="n">1</span><span class="o">]</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">restD</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">restR</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">banD</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">banR</span> <span class="o">=</span> <span class="n">0</span><span class="o">,</span> <span class="n">index</span> <span class="o">=</span> <span class="n">l</span><span class="o">-</span><span class="n">1</span><span class="o">;</span>
        <span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">sen</span><span class="o">[</span><span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">]</span><span class="o">=</span><span class="o">=</span><span class="sc">&#39;R&#39;</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">banR</span><span class="o">&gt;</span><span class="n">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">banR</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
                    <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">]</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">banD</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
                    <span class="n">restR</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">banD</span><span class="o">&gt;</span><span class="n">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">banD</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
                    <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">]</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">banR</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
                    <span class="n">restD</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
            <span class="k">if</span><span class="o">(</span><span class="n">index</span><span class="o">&gt;</span><span class="o">=</span><span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">)</span> <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">while</span><span class="o">(</span><span class="n">restD</span><span class="o">!</span><span class="o">=</span><span class="n">0</span> <span class="o">&amp;</span><span class="o">&amp;</span> <span class="n">restR</span><span class="o">!</span><span class="o">=</span><span class="n">0</span><span class="o">)</span> <span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">sen</span><span class="o">[</span><span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">]</span><span class="o">=</span><span class="o">=</span><span class="sc">&#39;R&#39;</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">banR</span><span class="o">&gt;</span><span class="n">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">banR</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
                    <span class="n">restR</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
                    <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">]</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">banD</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">banD</span><span class="o">&gt;</span><span class="n">0</span><span class="o">)</span> <span class="o">{</span>
                    <span class="n">banD</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
                    <span class="n">restD</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
                    <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">]</span><span class="o">;</span>
                <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
                    <span class="n">banR</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
                    <span class="n">index</span> <span class="o">=</span> <span class="n">pos</span><span class="o">[</span><span class="n">index</span><span class="o">]</span><span class="o">;</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">restD</span><span class="o">=</span><span class="o">=</span><span class="n">0</span><span class="o">?</span><span class="s">&#34;Radiant&#34;</span><span class="o">:</span><span class="s">&#34;Dire&#34;</span><span class="o">;</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>执行用时也是3ms，可能是对指针数组的初始化以及遍历时访问数组存在一定的耗时，在数据量不大时优势无法体现。不过结果我已经很满意了。</p>
<p>顺便这里我测试了一下，将字符串转成字符数组后遍历，执行用时为3ms，不转成字符数组直接遍历的情况下，执行用时为5ms。可见java中对字符串的遍历不如字符数组来的快。</p>
<p>优化完成后，发现提交记录里有位大佬的代码执行用时达到了1ms。</p>
<div class="highlight"><pre class="chroma"><code class="language-java" data-lang="java"><span class="kd">class</span> <span class="nc">Solution</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="n">String</span> <span class="nf">predictPartyVictory</span><span class="o">(</span><span class="n">String</span> <span class="n">senate</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">predictPartyVictory</span><span class="o">(</span><span class="n">senate</span><span class="o">.</span><span class="na">toCharArray</span><span class="o">(</span><span class="o">)</span><span class="o">,</span><span class="n">0</span><span class="o">,</span><span class="n">senate</span><span class="o">.</span><span class="na">length</span><span class="o">(</span><span class="o">)</span><span class="o">,</span><span class="n">0</span><span class="o">)</span><span class="o">;</span>   

    <span class="o">}</span>

    <span class="kd">public</span> <span class="n">String</span> <span class="nf">predictPartyVictory</span><span class="o">(</span><span class="kt">char</span><span class="o">[</span><span class="o">]</span> <span class="n">cs</span><span class="o">,</span><span class="kt">int</span> <span class="n">s</span><span class="o">,</span><span class="kt">int</span> <span class="n">e</span><span class="o">,</span><span class="kt">int</span> <span class="n">r</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// if(e==1){
</span><span class="c1"></span>        <span class="c1">//     return cs[0]==&#39;R&#39;?&#34;Radiant&#34;:&#34;Dire&#34;;
</span><span class="c1"></span>        <span class="c1">// }
</span><span class="c1"></span>
        <span class="kt">boolean</span> <span class="n">winR</span> <span class="o">=</span> <span class="n">r</span><span class="o">&gt;</span><span class="n">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="kt">int</span> <span class="n">distribute</span> <span class="o">=</span> <span class="n">0</span><span class="o">;</span>
        <span class="k">for</span><span class="o">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="n">0</span><span class="o">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">e</span><span class="o">;</span><span class="n">i</span><span class="o">+</span><span class="o">+</span><span class="o">)</span><span class="o">{</span>
            <span class="k">if</span><span class="o">(</span><span class="n">cs</span><span class="o">[</span><span class="n">i</span><span class="o">]</span><span class="o">=</span><span class="o">=</span><span class="sc">&#39;R&#39;</span><span class="o">)</span><span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">r</span><span class="o">&gt;</span><span class="o">=</span><span class="n">0</span><span class="o">)</span><span class="o">{</span>   
                    <span class="n">cs</span><span class="o">[</span><span class="n">idx</span><span class="o">+</span><span class="o">+</span><span class="o">]</span><span class="o">=</span><span class="sc">&#39;R&#39;</span><span class="o">;</span>
                    <span class="n">distribute</span><span class="o">|</span><span class="o">=</span><span class="n">1</span><span class="o">;</span>
                    <span class="n">winR</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
                <span class="o">}</span>
                    <span class="n">r</span><span class="o">+</span><span class="o">+</span><span class="o">;</span>
            <span class="o">}</span><span class="k">else</span><span class="o">{</span>
                <span class="k">if</span><span class="o">(</span><span class="n">r</span><span class="o">&lt;</span><span class="o">=</span><span class="n">0</span><span class="o">)</span><span class="o">{</span>
                    <span class="n">cs</span><span class="o">[</span><span class="n">idx</span><span class="o">+</span><span class="o">+</span><span class="o">]</span><span class="o">=</span><span class="sc">&#39;D&#39;</span><span class="o">;</span>
                    <span class="n">distribute</span><span class="o">|</span><span class="o">=</span><span class="n">2</span><span class="o">;</span>
                    <span class="n">winR</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>
                <span class="o">}</span>
                <span class="n">r</span><span class="o">-</span><span class="o">-</span><span class="o">;</span>
            <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">if</span><span class="o">(</span><span class="n">distribute</span><span class="o">!</span><span class="o">=</span><span class="n">3</span><span class="o">)</span><span class="o">{</span>
            <span class="k">return</span> <span class="n">winR</span><span class="o">?</span><span class="s">&#34;Radiant&#34;</span><span class="o">:</span><span class="s">&#34;Dire&#34;</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="k">return</span> <span class="n">predictPartyVictory</span><span class="o">(</span><span class="n">cs</span><span class="o">,</span> <span class="n">0</span><span class="o">,</span> <span class="n">idx</span><span class="o">,</span><span class="n">r</span><span class="o">)</span><span class="o">;</span>

    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div><p>用双指针简单地完成了我用指针数组才实现的删除沉默节点的操作，单变量的正负表示双方将要被禁言的人数，并用位运算实现了判断本次遍历是否双方依然都存在活人。我只能说，这种代码再给我一年我也写不出来。。。</p>
</article>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

  <div class="footer container-xl width-full p-responsive">
  <div
    class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between flex-sm-items-center pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
    <a aria-label="Homepage" title="GitHub" class="footer-octicon d-none d-lg-block mr-lg-4" href="https://zzzzwwjj.github.io/">
      <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24">
        <path fill-rule="evenodd"
          d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
        </path>
      </svg>
    </a>
    <ul class="list-style-none d-flex flex-wrap col-12 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
      
      <li class="mr-3 mr-lg-0">Theme by <a href='https://github.com/MeiK2333/github-style'>github-style</a></li>
      
    </ul>
  </div>
  <div class="d-flex flex-justify-center pb-6">
    <span class="f6 text-gray-light"></span>
  </div>


</div>
</body>

<script type="application/javascript" src="https://zzzzwwjj.github.io/js/github-style.js"></script>



</html>